<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.86.0" /><META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">


<link rel="shortcut icon" href="/v/v1.7.0/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/v/v1.7.0/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/v/v1.7.0/favicons/android-192x192.png" sizes="192x192">

<title>SAML authentication | INDIGO IAM</title><meta property="og:title" content="SAML authentication" />
<meta property="og:description" content="IAM supports brokered SAML authentication. When SAML authentication is turned on for an IAM instance, users can log into the service using the home Identity Provider (IdP) credentials.
To enable SAML authentication for your IAM instance you have to:
 Choose an entityId for your IAM instance; see the Shibboleth docs for guidance on this Generate a self-signed certificate for your IAM instance that will be used for SAML cryptographic operations and include it in a Java keystore; Obtain SAML metadata from your IdP or identity federation; If the metadata is signed, import the certificate that must be used to verify the signature in the Java keystore generated above; Enable the saml profile for the IAM and configure SAML support via the appropriate environment variables." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/v/v1.7.0/docs/reference/configuration/external-authentication/saml/" /><meta property="article:section" content="docs" />

<meta property="og:site_name" content="INDIGO IAM" />

<meta itemprop="name" content="SAML authentication">
<meta itemprop="description" content="IAM supports brokered SAML authentication. When SAML authentication is turned on for an IAM instance, users can log into the service using the home Identity Provider (IdP) credentials.
To enable SAML authentication for your IAM instance you have to:
 Choose an entityId for your IAM instance; see the Shibboleth docs for guidance on this Generate a self-signed certificate for your IAM instance that will be used for SAML cryptographic operations and include it in a Java keystore; Obtain SAML metadata from your IdP or identity federation; If the metadata is signed, import the certificate that must be used to verify the signature in the Java keystore generated above; Enable the saml profile for the IAM and configure SAML support via the appropriate environment variables.">

<meta itemprop="wordCount" content="982">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SAML authentication"/>
<meta name="twitter:description" content="IAM supports brokered SAML authentication. When SAML authentication is turned on for an IAM instance, users can log into the service using the home Identity Provider (IdP) credentials.
To enable SAML authentication for your IAM instance you have to:
 Choose an entityId for your IAM instance; see the Shibboleth docs for guidance on this Generate a self-signed certificate for your IAM instance that will be used for SAML cryptographic operations and include it in a Java keystore; Obtain SAML metadata from your IdP or identity federation; If the metadata is signed, import the certificate that must be used to verify the signature in the Java keystore generated above; Enable the saml profile for the IAM and configure SAML support via the appropriate environment variables."/>







<link rel="preload" href="/v/v1.7.0/scss/main.min.8c56a5db29a8a7bfd7c31c587d450fd15c23c45c8cd6e72142c8ed5b2ef43bd5.css" as="style">
<link href="/v/v1.7.0/scss/main.min.8c56a5db29a8a7bfd7c31c587d450fd15c23c45c8cd6e72142c8ed5b2ef43bd5.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/v/v1.7.0/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">INDIGO IAM</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a  class="nav-link active" href="/v/v1.7.0/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a  class="nav-link" href="/v/v1.7.0/blog/" ><span>Blog</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-none d-lg-block">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.7.0">v1.7.0</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/v/v1.7.0/offline-search-index.4f84f87115e16416ab8e4a3ff62867d1.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center d-lg-none">
    



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/v/v1.7.0/offline-search-index.4f84f87115e16416ab8e4a3ff62867d1.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>


    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="vv170docs">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/overview/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docsoverview">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/getting-started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docsgetting-started">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsgetting-startednginx" href="/v/v1.7.0/docs/getting-started/nginx/">NGINX configuration</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsgetting-startedmariadb" href="/v/v1.7.0/docs/getting-started/mariadb/">Database configuration</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsgetting-startedjwk" href="/v/v1.7.0/docs/getting-started/jwk/">JSON Web Keys configuration</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsgetting-starteddocker" href="/v/v1.7.0/docs/getting-started/docker/">Deployment with Docker</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsgetting-startedpackages" href="/v/v1.7.0/docs/getting-started/packages/">Deployment with packages</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsgetting-startedbasic_setup" href="/v/v1.7.0/docs/getting-started/basic_setup/">Basic IAM setup</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docsconcepts">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/reference/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse show" id="vv170docsreference">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/reference/api/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">APIs</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docsreferenceapi">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapiaup-api" href="/v/v1.7.0/docs/reference/api/aup-api/">AUP management API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapigroup-requests" href="/v/v1.7.0/docs/reference/api/group-requests/">Group requests API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapihealth_endpoints" href="/v/v1.7.0/docs/reference/api/health_endpoints/">Health checks</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapitokens-api" href="/v/v1.7.0/docs/reference/api/tokens-api/">IAM Token management API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapioauth-token-exchange" href="/v/v1.7.0/docs/reference/api/oauth-token-exchange/">OAuth token exchange API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapioauth-token-introspection" href="/v/v1.7.0/docs/reference/api/oauth-token-introspection/">OAuth token introspection API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapioidc-client-management" href="/v/v1.7.0/docs/reference/api/oidc-client-management/">OpenID Connect client management API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapioidc-client-registration" href="/v/v1.7.0/docs/reference/api/oidc-client-registration/">OpenID Connect client registration API</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceapiscim-api" href="/v/v1.7.0/docs/reference/api/scim-api/">SCIM API</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/reference/configuration/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Configuration</a>
  </li>
  <ul>
    <li class="collapse show" id="vv170docsreferenceconfiguration">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceconfigurationjwt-profiles" href="/v/v1.7.0/docs/reference/configuration/jwt-profiles/">JWT profiles support</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceconfigurationlifecycle" href="/v/v1.7.0/docs/reference/configuration/lifecycle/">Membership lifecycle</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceconfigurationregistration" href="/v/v1.7.0/docs/reference/configuration/registration/">Registration &amp; Enrollment</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceconfigurationlocal_authn" href="/v/v1.7.0/docs/reference/configuration/local_authn/">Local authentication</a>
        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/reference/configuration/external-authentication/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">External authentication</a>
  </li>
  <ul>
    <li class="collapse show" id="vv170docsreferenceconfigurationexternal-authentication">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceconfigurationexternal-authenticationoidc" href="/v/v1.7.0/docs/reference/configuration/external-authentication/oidc/">OpenID-Connect authentication</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page  active" id="m-vv170docsreferenceconfigurationexternal-authenticationsaml" href="/v/v1.7.0/docs/reference/configuration/external-authentication/saml/">SAML authentication</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docsreferenceconfigurationexternal-authenticationx509" href="/v/v1.7.0/docs/reference/configuration/external-authentication/x509/">X.509 authentication</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/tasks/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Tasks</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docstasks">
      
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/tasks/administration/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">IAM organization administration</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docstasksadministration">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksadministrationuser-management" href="/v/v1.7.0/docs/tasks/administration/user-management/">User management</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksadministrationgroup-management" href="/v/v1.7.0/docs/tasks/administration/group-management/">Group Management</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksadministrationaup-management" href="/v/v1.7.0/docs/tasks/administration/aup-management/">Acceptable Usage Policy (AUP) management</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/tasks/deployment/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">IAM service deployment</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docstasksdeployment">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksdeploymentbackup_restore" href="/v/v1.7.0/docs/tasks/deployment/backup_restore/">Backup &amp; Restore</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksdeploymentaudit-log" href="/v/v1.7.0/docs/tasks/deployment/audit-log/">Audit log</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksdeploymentupgrade" href="/v/v1.7.0/docs/tasks/deployment/upgrade/">Upgrade</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/tasks/user/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">User</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docstasksuser">
      
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserjoining-a-collaboration" href="/v/v1.7.0/docs/tasks/user/joining-a-collaboration/">Joining an IAM-managed organization</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksusergetting-a-token" href="/v/v1.7.0/docs/tasks/user/getting-a-token/">Obtaining an IAM access token from a CLI</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserclient-registration" href="/v/v1.7.0/docs/tasks/user/client-registration/">Registering a client</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserchange-details" href="/v/v1.7.0/docs/tasks/user/change-details/">Change account information</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserchange-password" href="/v/v1.7.0/docs/tasks/user/change-password/">Changing the account password</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserexternal-account-linking" href="/v/v1.7.0/docs/tasks/user/external-account-linking/">Linking an external account</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserx509-linking" href="/v/v1.7.0/docs/tasks/user/x509-linking/">Linking an X.509 certificate</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksusermanage-active-tokens" href="/v/v1.7.0/docs/tasks/user/manage-active-tokens/">Managing active tokens</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksusermanage-approved-sites" href="/v/v1.7.0/docs/tasks/user/manage-approved-sites/">Managing approved sites</a>
        
      
      
      
        
          
          
          <a class="td-sidebar-link td-sidebar-link__page " id="m-vv170docstasksuserreset-password" href="/v/v1.7.0/docs/tasks/user/reset-password/">Reset an account password</a>
        
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/developer-guide/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Developer guide</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docsdeveloper-guide">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
      
        
          






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/v/v1.7.0/docs/iam-aas/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">IAM as a service</a>
  </li>
  <ul>
    <li class="collapse " id="vv170docsiam-aas">
      
      
      
    </li>
  </ul>
</ul>

        
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            






<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">











<a href="https://github.com/indigo-iam/iam-website/edit/main/content/en/docs/reference/configuration/external-authentication/saml.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/indigo-iam/iam-website/new/main/content/en/docs/reference/configuration/external-authentication/saml.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/indigo-iam/iam-website/issues/new?title=SAML%20authentication" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/indigo-iam/iam/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>



<a id="print" href="/v/v1.7.0/docs/reference/configuration/external-authentication/_print/"><i class="fa fa-print fa-fw"></i> Print entire section</a>



</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#generate-a-self-signed-certificate">Generate a Self-signed certificate</a></li>
    <li><a href="#obtain-saml-metadata-for-your-idp-or-identity-federation">Obtain SAML metadata for your IdP or identity federation</a>
      <ul>
        <li><a href="#signed-metadata-advice">Signed metadata advice</a></li>
        <li><a href="#metadata-configuration">Metadata configuration</a></li>
      </ul>
    </li>
    <li><a href="#iam-saml-attribute-requirements">IAM SAML attribute requirements</a></li>
    <li><a href="#checking-saml-assertion-and-authentication-freshness">Checking SAML assertion and authentication freshness</a></li>
    <li><a href="#limiting-authentication-only-to-selected-idps">Limiting authentication only to selected IdPs</a>
      <ul>
        <li><a href="#limiting-by-entity-id">Limiting by entity id</a></li>
        <li><a href="#limiting-by-sirtfi-compliance">Limiting by SIRTFI compliance</a></li>
      </ul>
    </li>
    <li><a href="#customizing-saml-login-button-text">Customizing SAML login button text</a></li>
    <li><a href="#minimal-saml-configuration-example">Minimal SAML configuration example</a></li>
    <li><a href="#custom-saml-configuration">Custom SAML configuration</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		
















<li class="breadcrumb-item" >
	<a href="/v/v1.7.0/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="/v/v1.7.0/docs/reference/">Reference</a>
</li>




<li class="breadcrumb-item" >
	<a href="/v/v1.7.0/docs/reference/configuration/">Configuration</a>
</li>




<li class="breadcrumb-item" >
	<a href="/v/v1.7.0/docs/reference/configuration/external-authentication/">External authentication</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/v/v1.7.0/docs/reference/configuration/external-authentication/saml/">SAML authentication</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>SAML authentication</h1>
    
	       
	<p>IAM supports brokered SAML authentication. When SAML authentication is turned
on for an IAM instance, users can log into the service using the home Identity
Provider (IdP) credentials.</p>
<p>To enable SAML authentication for your IAM instance you have to:</p>
<ul>
<li>Choose an <code>entityId</code> for your IAM instance; see the <a href="https://wiki.shibboleth.net/confluence/display/CONCEPT/EntityNaming">Shibboleth
docs</a> for guidance on this</li>
<li>Generate a self-signed certificate for your IAM instance that will be used
for SAML cryptographic operations and include it in a Java keystore;</li>
<li>Obtain SAML metadata from your IdP or identity federation;</li>
<li>If the metadata is signed, import the certificate that must be used to verify
the signature in the Java keystore generated above;</li>
<li>Enable the <code>saml</code> profile for the IAM and configure SAML support via the
appropriate environment variables.</li>
</ul>
<h2 id="generate-a-self-signed-certificate">Generate a Self-signed certificate</h2>
<p>To generate a self-signed certificate that lasts 5 years use the following
openssl command:</p>
<pre><code class="language-console" data-lang="console">openssl req -newkey rsa:2048 -nodes -x509 -days 1825  -keyout self-signed.key.pem \
  -out self-signed.cert.pem
</code></pre><p>The above command will generate a private key and the corresponding certificate
in PEM format. You will be asked to provide a subject for the certificate being
generated.</p>
<p>To import this certificate in a Java keystore we need in in p12 format. Use the
following commands to convert the certificate in p12 format and import it in a
Java keystore:</p>
<pre><code class="language-console" data-lang="console">openssl pkcs12 -export -inkey self-signed.key.pem \
    -name self-signed \
    -in self-signed.cert.pem \
    -out self-signed.p12

keytool -importkeystore -destkeystore self-signed.jks \
    -srckeystore self-signed.p12 \
    -srcstoretype PKCS12
</code></pre><p>During the above process you will be asked to provide a p12 export password and
a keystore password. Use the same password, at least 6 characters long,
otherwise it will not work for the java keystore.</p>
<p>You can list the contents of the keystore with the following command:</p>
<pre><code class="language-console" data-lang="console">keytool -list -keystore self-signed.jks
</code></pre><h2 id="obtain-saml-metadata-for-your-idp-or-identity-federation">Obtain SAML metadata for your IdP or identity federation</h2>
<p>You IdP or identity federation will have a SAML metadata document describing,
in SAML terms, which authentication flows are enabled and providing access to
cryptographic material and other information that make the federated
authentication schemes work reliably and securely. For more information on SAML
metadata, see <a href="https://wiki.shibboleth.net/confluence/display/CONCEPT/Metadata">the Shibboleth metadata documentation</a>.</p>
<h3 id="signed-metadata-advice">Signed metadata advice</h3>
<p>Typically identity federations sign the SAML metadata for security reasons, and
provide a certificate (and linked public key) that can be used to verify
signatures on the metadata at a well-known location (e.g., the federation
website).</p>
<p>To support metadata signature verification you will need to import this
certificate in the Java keystore created above.</p>
<p>Certificates are typically published in PEM format, while to import a
certificate in a Java keystore you will need it in DER format.</p>
<p>The following commands show how to import a PEM certificate into a Java
keystore:</p>
<pre><code class="language-console" data-lang="console">openssl x509 -outform der -in idem_signer_2019.pem -out idem_signer_2019.der
keytool -import -alias idem_signer_2019 -keystore self-signed.jks -file idem_signer_2019.der
</code></pre><h3 id="metadata-configuration">Metadata configuration</h3>
<p>The IdP or federation metadata to be trusted can be specified with the
<code>IAM_SAML_IDP_METADATA</code> environment variable, which contains an URL pointing to
the metadata.</p>
<p>If the metadata is signed, you can enforce signature validation with the
<code>IAM_SAML_METADATA_REQUIRE_VALID_SIGNATURE</code> variable.</p>
<p>Metadata needs to be periodically refreshed to learn about new entities in the
federation or updated key material. The metadata refresh interval can be
specified with the <code>IAM_SAML_METADATA_LOOKUP_SERVICE_REFRESH_PERIOD_SEC</code>
environment variable, which defines a refresh period in seconds (a reasonable
value is typically refresh metadata every hour).</p>
<p>An example metadata configuration could be:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-env" data-lang="env"><span style="color:#000">IAM_SAML_IDP_METADATA</span><span style="color:#ce5c00;font-weight:bold">=</span>http://www.garr.it/idem-metadata/idem-metadata-sha256.xml
<span style="color:#000">IAM_SAML_METADATA_REQUIRE_VALID_SIGNATURE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
<span style="color:#000">IAM_SAML_METADATA_LOOKUP_SERVICE_REFRESH_PERIOD_SEC</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">3600</span>
</code></pre></div><h2 id="iam-saml-attribute-requirements">IAM SAML attribute requirements</h2>
<p>IAM requires that the IdP used for authentication releases a persistent
identifier attribute that can be used to link the external identity to local
IAM accounts. If the IdP does not release persistent identifier attributes, it
<strong>cannot</strong> be integrated with the IAM.</p>
<p>The attribute used to link the external SAML account is configurable. In the
default configuration, IAM uses the following attributes (in the given order):</p>
<ol>
<li><a href="http://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonUniqueId">EduPersonUniqueId</a></li>
<li><a href="http://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID">EduPersonTargetedId</a></li>
<li><a href="http://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonPrincipalName">EduPersonPrincipalName</a></li>
</ol>
<p>The order of these can be changed with the <code>IAM_SAML_ID_RESOLVERS</code> environment variable,
which accepts a list of aliases for the attributes to be searched.</p>
<p>The following tables maps attribute names to the aliases currently supported:</p>
<table>
<thead>
<tr>
<th>SAML attribute</th>
<th>Alias</th>
</tr>
</thead>
<tbody>
<tr>
<td>EduPersonUniqueId</td>
<td>eduPersonUniqueId</td>
</tr>
<tr>
<td>EduPersonTargetedId</td>
<td>eduPersonTargetedId</td>
</tr>
<tr>
<td>EduPersonPrincipalName</td>
<td>eduPersonPrincipalName</td>
</tr>
<tr>
<td>EduPersonOrcid</td>
<td>eduPersonOrcid</td>
</tr>
<tr>
<td>spidCode</td>
<td>spidCode</td>
</tr>
</tbody>
</table>
<p>The default value for IAM_SAML_ID_RESOLVERS is:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-env" data-lang="env"><span style="color:#000">IAM_SAML_ID_RESOLVERS</span><span style="color:#ce5c00;font-weight:bold">=</span>eduPersonUniqueId,eduPersonTargetedId,eduPersonPrincipalName
</code></pre></div><h2 id="checking-saml-assertion-and-authentication-freshness">Checking SAML assertion and authentication freshness</h2>
<p>IAM provides the ability to set a maximum age for SAML assertion and
authentication statements received from IdPs.</p>
<p>The <code>IAM_SAML_MAX_ASSERTION_TIME</code> allows to define an upper bound (in seconds)
on the SAML assertion lifetime, so that assertions that exceed such limit are
considered invalid.</p>
<p>The <code>IAM_SAML_MAX_AUTHENTICATION_AGE</code> allows to define an upper bound (in
seconds) on the authentication age linked to SAML authentication statements, so
that users are forced to reauthenticate when this limit is exceeded.</p>
<h2 id="limiting-authentication-only-to-selected-idps">Limiting authentication only to selected IdPs</h2>
<p>IAM provides the ability to define constraints on which IdPs will be allowed
for authentication. This is useful when you want to limit which IdPs in a large
federation (e.g., <a href="https://edugain.org/">EduGAIN</a>) will be trusted for authentication.</p>
<p>Currently three types of IdPs limiting are supported:</p>
<ul>
<li>entity id whitelist</li>
<li>SIRTFI compliance</li>
<li>Research and Scholarship compliance</li>
</ul>
<h3 id="limiting-by-entity-id">Limiting by entity id</h3>
<p>The <code>IAM_SAML_IDP_ENTITY_ID_WHITELIST</code> environment variable can be used to
define a comma-separated whitelist of IdPs entity IDs that will be trusted for
authentication.</p>
<p>The following example limits trusted IdPs to the INFN IdP:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-env" data-lang="env"><span style="color:#000">IAM_SAML_IDP_ENTITY_ID_WHITELIST</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://idp.infn.it/saml2/idp/metadata.php&#34;</span>
</code></pre></div><h3 id="limiting-by-sirtfi-compliance">Limiting by SIRTFI compliance</h3>
<p>To limit authentication only to IdPs that are <a href="https://refeds.org/sirtfi">SIRFTI</a>-compliant, set
the the <code>IAM_SAML_METADATA_REQUIRE_SIRTFI</code> environment variable to true.</p>
<h2 id="customizing-saml-login-button-text">Customizing SAML login button text</h2>
<p>You can customize the SAML login button text shown in the IAM login page with
the <code>IAM_SAML_LOGIN_BUTTON_TEXT</code> environment variable.</p>
<h2 id="minimal-saml-configuration-example">Minimal SAML configuration example</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-env" data-lang="env"><span style="color:#000">IAM_SAML_ENTITY_ID</span><span style="color:#ce5c00;font-weight:bold">=</span>urn:example:iam-saml-example
<span style="color:#000">IAM_SAML_KEYSTORE</span><span style="color:#ce5c00;font-weight:bold">=</span>file:///self-signed.jks
<span style="color:#000">IAM_SAML_KEYSTORE_PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span>xxxxxx
<span style="color:#000">IAM_SAML_KEY_ID</span><span style="color:#ce5c00;font-weight:bold">=</span>self-signed
<span style="color:#000">IAM_SAML_KEY_PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span>xxxxxx
<span style="color:#000">IAM_SAML_IDP_METADATA</span><span style="color:#ce5c00;font-weight:bold">=</span>http://www.garr.it/idem-metadata/idem-metadata-sha256.xml
<span style="color:#000">IAM_SAML_METADATA_REQUIRE_VALID_SIGNATURE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
<span style="color:#000">IAM_SAML_METADATA_LOOKUP_SERVICE_REFRESH_PERIOD_SEC</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">3600</span>
<span style="color:#000">IAM_SAML_LOGIN_BUTTON_TEXT</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Sign in with IDEM&#34;</span>
</code></pre></div><h2 id="custom-saml-configuration">Custom SAML configuration</h2>
<p>The configuration based on environment variables relies on a <a href="https://raw.githubusercontent.com/indigo-iam/iam/v1.7.0/iam-login-service/src/main/resources/application-saml.yml">configuration
template</a> that fits most use cases embedded in the IAM war
file.</p>
<p>To have full control on the SAML configuration, provide a custom
<code>application-saml.yml</code> file in the IAM configuration directory.</p>
<p>See the <a href="/docs/reference/configuration">configuration reference</a> for more SAML metadata options and
instructions on how to override the default IAM configuration.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified January 1, 0001
</div>
</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://github.com/indigo-iam/iam">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://indigo-iam.slack.com">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 INFN All Rights Reserved</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank">Privacy Policy</a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/v/v1.7.0/js/main.min.63db3e552bd0543be17ce4a79a18b744e9cb72256bec42b540e3ab0cd43722d0.js" integrity="sha256-Y9s&#43;VSvQVDvhfOSnmhi3ROnLciVr7EK1QOOrDNQ3ItA=" crossorigin="anonymous"></script>




  </body>
</html>