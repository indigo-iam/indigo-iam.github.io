<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="alternate" type="text/html" href="/v/v1.12.0/docs/reference/configuration/external-authentication/saml/_print/">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="/v/v1.12.0/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/v/v1.12.0/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/v/v1.12.0/favicons/android-192x192.png" sizes="192x192">

<title>SAML authentication | INDIGO IAM</title>
<meta name="description" content="The INDIGO Identity and Access Management (IAM) Service">
<meta property="og:title" content="SAML authentication" />
<meta property="og:description" content="The INDIGO Identity and Access Management (IAM) Service" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/v/v1.12.0/docs/reference/configuration/external-authentication/saml/" />

<meta itemprop="name" content="SAML authentication">
<meta itemprop="description" content="The INDIGO Identity and Access Management (IAM) Service"><meta name="twitter:card" content="summary"/><meta name="twitter:title" content="SAML authentication"/>
<meta name="twitter:description" content="The INDIGO Identity and Access Management (IAM) Service"/>




<link rel="preload" href="/v/v1.12.0/scss/main.min.8b15a284065632327b8c02a701e1c2297b5d1c084085e061cb33bbd46e6313e8.css" as="style">
<link href="/v/v1.12.0/scss/main.min.8b15a284065632327b8c02a701e1c2297b5d1c084085e061cb33bbd46e6313e8.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<script defer
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>

  </head>
  <body class="td-section">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="/v/v1.12.0/"><span class="navbar-brand__logo navbar-logo"></span><span class="navbar-brand__name">INDIGO IAM</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link active" href="/v/v1.12.0/docs/"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/v/v1.12.0/blog/"><span>Blog</span></a>
      </li>
      <li class="nav-item dropdown d-none d-lg-block">
        <div class="dropdown">
  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Releases</a>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.12.0">v1.12.0</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.11.0">v1.11.0</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.10.2">v1.10.2</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.10.1">v1.10.1</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.10.0">v1.10.0</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.9.0">v1.9.0</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.8.4">v1.8.4</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.8.3">v1.8.3</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.8.2">v1.8.2</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.8.1">v1.8.1</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.8.0">v1.8.0</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.7.2">v1.7.2</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.7.1">v1.7.1</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/v/v1.7.0">v1.7.0</a></li>
    <li><a class="dropdown-item" href="https://indigo-iam.github.io/docs/v/current/">older releases</a></li>
    </ul>
</div></li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/v/v1.12.0/offline-search-index.2bc7a06f56800529184b5d4a05886bb8.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <div id="content-mobile">
  <form class="td-sidebar__search d-flex align-items-center">
    <div class="td-search td-search--offline">
  <div class="td-search__icon"></div>
  <input
    type="search"
    class="td-search__input form-control"
    placeholder="Search this site…"
    aria-label="Search this site…"
    autocomplete="off"
    
    data-offline-search-index-json-src="/v/v1.12.0/offline-search-index.2bc7a06f56800529184b5d4a05886bb8.json"
    data-offline-search-base-href="/"
    data-offline-search-max-results="10"
  >
</div>
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  </div>
  <div id="content-desktop"></div>
  <nav class="td-sidebar-nav collapse td-sidebar-nav--search-disabled" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-vv1120docs-li">
  <a href="/v/v1.12.0/docs/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-vv1120docs"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsoverview-li">
  <a href="/v/v1.12.0/docs/overview/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsoverview"><span class="">Overview</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docsgetting-started-li">
  <a href="/v/v1.12.0/docs/getting-started/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-started"><span class="">Getting Started</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsgetting-startednginx-li">
  <a href="/v/v1.12.0/docs/getting-started/nginx/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-startednginx"><span class="">NGINX configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsgetting-startedmariadb-li">
  <a href="/v/v1.12.0/docs/getting-started/mariadb/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-startedmariadb"><span class="">Database configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsgetting-startedjwk-li">
  <a href="/v/v1.12.0/docs/getting-started/jwk/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-startedjwk"><span class="">JSON Web Keys configuration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsgetting-starteddocker-li">
  <a href="/v/v1.12.0/docs/getting-started/docker/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-starteddocker"><span class="">Deployment with Docker</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsgetting-startedpackages-li">
  <a href="/v/v1.12.0/docs/getting-started/packages/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-startedpackages"><span class="">Deployment with packages</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsgetting-startedbasic_setup-li">
  <a href="/v/v1.12.0/docs/getting-started/basic_setup/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsgetting-startedbasic_setup"><span class="">Basic IAM setup</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-vv1120docsreference-li">
  <a href="/v/v1.12.0/docs/reference/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreference"><span class="">Reference</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docsreferenceapi-li">
  <a href="/v/v1.12.0/docs/reference/api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapi"><span class="">APIs</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapiaup-api-li">
  <a href="/v/v1.12.0/docs/reference/api/aup-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapiaup-api"><span class="">AUP management API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapiaup-sign-api-li">
  <a href="/v/v1.12.0/docs/reference/api/aup-sign-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapiaup-sign-api"><span class="">AUP signature API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapiproxycert-api-li">
  <a href="/v/v1.12.0/docs/reference/api/proxycert-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapiproxycert-api"><span class="">Proxy certificate API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapigroup-requests-li">
  <a href="/v/v1.12.0/docs/reference/api/group-requests/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapigroup-requests"><span class="">Group requests API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapihealth_endpoints-li">
  <a href="/v/v1.12.0/docs/reference/api/health_endpoints/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapihealth_endpoints"><span class="">Health checks</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapiaccount-api-li">
  <a href="/v/v1.12.0/docs/reference/api/account-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapiaccount-api"><span class="">IAM account API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapitokens-api-li">
  <a href="/v/v1.12.0/docs/reference/api/tokens-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapitokens-api"><span class="">IAM Token management API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapioauth-token-exchange-li">
  <a href="/v/v1.12.0/docs/reference/api/oauth-token-exchange/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapioauth-token-exchange"><span class="">OAuth token exchange API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapioauth-token-introspection-li">
  <a href="/v/v1.12.0/docs/reference/api/oauth-token-introspection/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapioauth-token-introspection"><span class="">OAuth token introspection API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapioidc-client-management-li">
  <a href="/v/v1.12.0/docs/reference/api/oidc-client-management/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapioidc-client-management"><span class="">OpenID Connect client management API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapioidc-client-registration-li">
  <a href="/v/v1.12.0/docs/reference/api/oidc-client-registration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapioidc-client-registration"><span class="">OpenID Connect client registration API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapiscim-api-li">
  <a href="/v/v1.12.0/docs/reference/api/scim-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapiscim-api"><span class="">SCIM API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapiscope-policy-api-li">
  <a href="/v/v1.12.0/docs/reference/api/scope-policy-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapiscope-policy-api"><span class="">Scope Policy API</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapistats-endpoint-li">
  <a href="/v/v1.12.0/docs/reference/api/stats-endpoint/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapistats-endpoint"><span class="">Statistical endpoint</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceapitoken-exchange-policy-api-li">
  <a href="/v/v1.12.0/docs/reference/api/token-exchange-policy-api/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceapitoken-exchange-policy-api"><span class="">Token exchange policy API</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-vv1120docsreferenceconfiguration-li">
  <a href="/v/v1.12.0/docs/reference/configuration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfiguration"><span class="">Configuration</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationjwt-profiles-li">
  <a href="/v/v1.12.0/docs/reference/configuration/jwt-profiles/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationjwt-profiles"><span class="">JWT profiles support</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationmulti-factor-authn-li">
  <a href="/v/v1.12.0/docs/reference/configuration/multi-factor-authn/" title="Multi-Factor Authentication (MFA)" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationmulti-factor-authn"><span class="">Multi-factor authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationsystem-scopes-li">
  <a href="/v/v1.12.0/docs/reference/configuration/system-scopes/" title="MitreID System Scopes" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationsystem-scopes"><span class="">System scopes</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationgroup-enrollment-li">
  <a href="/v/v1.12.0/docs/reference/configuration/group-enrollment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationgroup-enrollment"><span class="">Automatic group enrollment</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationlifecycle-li">
  <a href="/v/v1.12.0/docs/reference/configuration/lifecycle/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationlifecycle"><span class="">Membership lifecycle</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationrcauth-li">
  <a href="/v/v1.12.0/docs/reference/configuration/rcauth/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationrcauth"><span class="">Integration with RCAuth</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationregistration-li">
  <a href="/v/v1.12.0/docs/reference/configuration/registration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationregistration"><span class="">Registration &amp; Enrollment</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationscim-response-li">
  <a href="/v/v1.12.0/docs/reference/configuration/scim-response/" title="Handling SCIM response" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationscim-response"><span class="">SCIM response</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationclient-registration-li">
  <a href="/v/v1.12.0/docs/reference/configuration/client-registration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationclient-registration"><span class="">Client registration</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationnotifications-li">
  <a href="/v/v1.12.0/docs/reference/configuration/notifications/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationnotifications"><span class="">IAM Notifications</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationjwk-li">
  <a href="/v/v1.12.0/docs/reference/configuration/jwk/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationjwk"><span class="">JSON Web Keys (JWK)</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationlocal_authn-li">
  <a href="/v/v1.12.0/docs/reference/configuration/local_authn/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationlocal_authn"><span class="">Local authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-vv1120docsreferenceconfigurationexternal-authentication-li">
  <a href="/v/v1.12.0/docs/reference/configuration/external-authentication/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationexternal-authentication"><span class="">External authentication</span></a>
  <ul class="ul-4 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationexternal-authenticationoidc-li">
  <a href="/v/v1.12.0/docs/reference/configuration/external-authentication/oidc/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationexternal-authenticationoidc"><span class="">OpenID-Connect authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-vv1120docsreferenceconfigurationexternal-authenticationsaml-li">
  <a href="/v/v1.12.0/docs/reference/configuration/external-authentication/saml/" class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationexternal-authenticationsaml"><span class="td-sidebar-nav-active-item">SAML authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsreferenceconfigurationexternal-authenticationx509-li">
  <a href="/v/v1.12.0/docs/reference/configuration/external-authentication/x509/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsreferenceconfigurationexternal-authenticationx509"><span class="">X.509 authentication</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docstasks-li">
  <a href="/v/v1.12.0/docs/tasks/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasks"><span class="">Tasks</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docstasksadministration-li">
  <a href="/v/v1.12.0/docs/tasks/administration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksadministration"><span class="">IAM organization administration</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksadministrationuser-management-li">
  <a href="/v/v1.12.0/docs/tasks/administration/user-management/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksadministrationuser-management"><span class="">User management</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksadministrationclient-status-change-li">
  <a href="/v/v1.12.0/docs/tasks/administration/client-status-change/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksadministrationclient-status-change"><span class="">Disable or Enable a client</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksadministrationgroup-management-li">
  <a href="/v/v1.12.0/docs/tasks/administration/group-management/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksadministrationgroup-management"><span class="">Group Management</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksadministrationaup-management-li">
  <a href="/v/v1.12.0/docs/tasks/administration/aup-management/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksadministrationaup-management"><span class="">Acceptable Usage Policy (AUP) management</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docstasksdeployment-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeployment"><span class="">IAM service deployment</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksdeploymentbackup_restore-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/backup_restore/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeploymentbackup_restore"><span class="">Backup &amp; Restore</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksdeploymentaudit-log-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/audit-log/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeploymentaudit-log"><span class="">Audit log</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksdeploymentupgrade-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/upgrade/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeploymentupgrade"><span class="">Upgrade</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksdeploymentha-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/ha/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeploymentha"><span class="">Deploying IAM in HA</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksdeploymentvoms-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/voms/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeploymentvoms"><span class="">Deploying the IAM VOMS attribute authority</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksdeploymentvoms_importer-li">
  <a href="/v/v1.12.0/docs/tasks/deployment/voms_importer/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksdeploymentvoms_importer"><span class="">Importing VOMS information into IAM</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksclientapp-li">
  <a href="/v/v1.12.0/docs/tasks/clientapp/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksclientapp"><span class="">IAM Test Client application</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docstasksuser-li">
  <a href="/v/v1.12.0/docs/tasks/user/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuser"><span class="">User</span></a>
  <ul class="ul-3 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserjoining-a-collaboration-li">
  <a href="/v/v1.12.0/docs/tasks/user/joining-a-collaboration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserjoining-a-collaboration"><span class="">Joining an IAM-managed organization</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksusergetting-a-token-li">
  <a href="/v/v1.12.0/docs/tasks/user/getting-a-token/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksusergetting-a-token"><span class="">Obtaining an IAM access token from a CLI</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserresign-aup-li">
  <a href="/v/v1.12.0/docs/tasks/user/resign-aup/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserresign-aup"><span class="">Re-sign AUP</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserclient-registration-li">
  <a href="/v/v1.12.0/docs/tasks/user/client-registration/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserclient-registration"><span class="">Registering a client</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserchange-details-li">
  <a href="/v/v1.12.0/docs/tasks/user/change-details/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserchange-details"><span class="">Change account information</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserchange-password-li">
  <a href="/v/v1.12.0/docs/tasks/user/change-password/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserchange-password"><span class="">Changing the account password</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserjwt-authn-li">
  <a href="/v/v1.12.0/docs/tasks/user/jwt-authn/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserjwt-authn"><span class="">JWT client authentication</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserexternal-account-linking-li">
  <a href="/v/v1.12.0/docs/tasks/user/external-account-linking/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserexternal-account-linking"><span class="">Linking an external account</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserx509-linking-li">
  <a href="/v/v1.12.0/docs/tasks/user/x509-linking/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserx509-linking"><span class="">Linking an X.509 certificate</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksusermanage-active-tokens-li">
  <a href="/v/v1.12.0/docs/tasks/user/manage-active-tokens/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksusermanage-active-tokens"><span class="">Managing active tokens</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksusermanage-approved-sites-li">
  <a href="/v/v1.12.0/docs/tasks/user/manage-approved-sites/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksusermanage-approved-sites"><span class="">Managing approved sites</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksusermanage-ssh-keys-li">
  <a href="/v/v1.12.0/docs/tasks/user/manage-ssh-keys/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksusermanage-ssh-keys"><span class="">Managing SSH keys</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docstasksuserreset-password-li">
  <a href="/v/v1.12.0/docs/tasks/user/reset-password/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docstasksuserreset-password"><span class="">Reset an account password</span></a>
</li>
  </ul>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-vv1120docsdeveloper-guide-li">
  <a href="/v/v1.12.0/docs/developer-guide/" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsdeveloper-guide"><span class="">Developer guide</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-vv1120docsdeveloper-guidespecs-li">
  <a href="/v/v1.12.0/docs/developer-guide/specs/" title="Specifications and useful resources" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-vv1120docsdeveloper-guidespecs"><span class="">Specifications</span></a>
</li>
  </ul>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">
<a href="https://github.com/indigo-iam/iam-website/tree/v1.12.0/content/en/docs/reference/configuration/external-authentication/saml/_index.md" class="td-page-meta--view td-page-meta__view" target="_blank" rel="noopener"><i class="fa-solid fa-file-lines fa-fw"></i> View page source</a>
  <a href="https://github.com/indigo-iam/iam-website/edit/v1.12.0/content/en/docs/reference/configuration/external-authentication/saml/_index.md" class="td-page-meta--edit td-page-meta__edit" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Edit this page</a>
  <a href="https://github.com/indigo-iam/iam-website/new/v1.12.0/content/en/docs/reference/configuration/external-authentication/saml?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" class="td-page-meta--child td-page-meta__child" target="_blank" rel="noopener"><i class="fa-solid fa-pen-to-square fa-fw"></i> Create child page</a>
  <a href="https://github.com/indigo-iam/iam-website/issues/new?title=SAML%20authentication" class="td-page-meta--issue td-page-meta__issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create documentation issue</a>
  <a href="https://github.com/indigo-iam/iam/issues/new" class="td-page-meta--project td-page-meta__project-issue" target="_blank" rel="noopener"><i class="fa-solid fa-list-check fa-fw"></i> Create project issue</a>
  <a id="print" href="/v/v1.12.0/docs/reference/configuration/external-authentication/saml/_print/"><i class="fa-solid fa-print fa-fw"></i> Print entire section</a>

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#generate-a-self-signed-certificate">Generate a Self-signed certificate</a></li>
    <li><a href="#obtain-saml-metadata-for-your-idp-or-identity-federation">Obtain SAML metadata for your IdP or identity federation</a>
      <ul>
        <li><a href="#signed-metadata-advice">Signed metadata advice</a></li>
        <li><a href="#metadata-configuration">Metadata configuration</a></li>
      </ul>
    </li>
    <li><a href="#iam-saml-attribute-requirements">IAM SAML attribute requirements</a></li>
    <li><a href="#checking-saml-assertion-and-authentication-freshness">Checking SAML assertion and authentication freshness</a></li>
    <li><a href="#limiting-authentication-only-to-selected-idps">Limiting authentication only to selected IdPs</a>
      <ul>
        <li><a href="#limiting-by-entity-id">Limiting by entity id</a></li>
        <li><a href="#limiting-by-sirtfi-compliance">Limiting by SIRTFI compliance</a></li>
      </ul>
    </li>
    <li><a href="#joining-a-saml-federation">Joining a SAML federation</a></li>
    <li><a href="#customizing-saml-login-button-text">Customizing SAML login button text</a></li>
    <li><a href="#minimal-saml-configuration-example">Minimal SAML configuration example</a></li>
    <li><a href="#custom-saml-configuration">Custom SAML configuration</a></li>
    <li><a href="#registration-form-filling-information-from-idp">Registration form: filling information from IdP</a></li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="/v/v1.12.0/docs/">Documentation</a></li>
  <li class="breadcrumb-item">
    <a href="/v/v1.12.0/docs/reference/">Reference</a></li>
  <li class="breadcrumb-item">
    <a href="/v/v1.12.0/docs/reference/configuration/">Configuration</a></li>
  <li class="breadcrumb-item">
    <a href="/v/v1.12.0/docs/reference/configuration/external-authentication/">External authentication</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    SAML authentication</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>SAML authentication</h1>
  
	<header class="article-meta">
		
</header>
	<p>IAM supports brokered SAML authentication. When SAML authentication is turned
on for an IAM instance, users can log into the service using the home Identity
Provider (IdP) credentials.</p>
<p>To enable SAML authentication for your IAM instance you have to:</p>
<ul>
<li>Choose an <code>entityId</code> for your IAM instance; see the <a href="https://wiki.shibboleth.net/confluence/display/CONCEPT/EntityNaming">Shibboleth
docs</a> for guidance on this</li>
<li>Generate a self-signed certificate for your IAM instance that will be used
for SAML cryptographic operations and include it in a Java keystore;</li>
<li>Obtain SAML metadata from your IdP or identity federation;</li>
<li>If the metadata is signed, import the certificate that must be used to verify
the signature in the Java keystore generated above;</li>
<li>Enable the <code>saml</code> profile for the IAM and configure SAML support via the
appropriate environment variables.</li>
</ul>
<h2 id="generate-a-self-signed-certificate">Generate a Self-signed certificate</h2>
<p>To generate a self-signed certificate that lasts 5 years use the following
openssl command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#000;font-style:italic">openssl req -newkey rsa:2048 -nodes -x509 -days 1825  -keyout self-signed.key.pem \
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">  -out self-signed.cert.pem
</span></span></span></code></pre></div><p>The above command will generate a private key and the corresponding certificate
in PEM format. You will be asked to provide a subject for the certificate being
generated.</p>
<p>To import this certificate in a Java keystore we need in in p12 format. Use the
following commands to convert the certificate in p12 format and import it in a
Java keystore:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#000;font-style:italic">openssl pkcs12 -export -inkey self-signed.key.pem \
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    -name self-signed \
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    -in self-signed.cert.pem \
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    -out self-signed.p12
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic"></span><span style="color:#a40000">
</span></span></span><span style="display:flex;"><span><span style="color:#a40000"></span><span style="color:#000;font-style:italic">keytool -importkeystore -destkeystore self-signed.jks \
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    -srckeystore self-signed.p12 \
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">    -srcstoretype PKCS12
</span></span></span></code></pre></div><p>During the above process you will be asked to provide a p12 export password and
a keystore password. <strong>Use the same password</strong>, at least 6 characters long,
otherwise it will not work for the java keystore.</p>
<p>You can list the contents of the keystore with the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#000;font-style:italic">keytool -list -keystore self-signed.jks
</span></span></span></code></pre></div><h2 id="obtain-saml-metadata-for-your-idp-or-identity-federation">Obtain SAML metadata for your IdP or identity federation</h2>
<p>You IdP or identity federation will have a SAML metadata document describing,
in SAML terms, which authentication flows are enabled and providing access to
cryptographic material and other information that make the federated
authentication schemes work reliably and securely. For more information on SAML
metadata, see <a href="https://wiki.shibboleth.net/confluence/display/CONCEPT/Metadata">the Shibboleth metadata documentation</a>.</p>
<h3 id="signed-metadata-advice">Signed metadata advice</h3>
<p>Typically identity federations sign the SAML metadata for security reasons, and
provide a certificate (and linked public key) that can be used to verify
signatures on the metadata at a well-known location (e.g., the federation
website).</p>
<p>To support metadata signature verification you will need to import this
certificate in the Java keystore created above.</p>
<p>Certificates are typically published in PEM format, while to import a
certificate in a Java keystore you will need it in DER format.</p>
<p>The following commands show how to import a PEM certificate into a Java
keystore:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span><span style="color:#000;font-style:italic">openssl x509 -outform der -in idem_signer_2019.pem -out idem_signer_2019.der
</span></span></span><span style="display:flex;"><span><span style="color:#000;font-style:italic">keytool -import -alias idem_signer_2019 -keystore self-signed.jks -file idem_signer_2019.der
</span></span></span></code></pre></div><h3 id="metadata-configuration">Metadata configuration</h3>
<p>The IdP or federation metadata to be trusted can be specified with the
<code>IAM_SAML_IDP_METADATA</code> environment variable, which contains an URL pointing to
the metadata.</p>
<p>If the metadata is signed, you can enforce signature validation with the
<code>IAM_SAML_METADATA_REQUIRE_VALID_SIGNATURE</code> variable.</p>
<p>Metadata needs to be periodically refreshed to learn about new entities in the
federation or updated key material. The metadata refresh interval can be
specified with the <code>IAM_SAML_METADATA_LOOKUP_SERVICE_REFRESH_PERIOD_SEC</code>
environment variable, which defines a refresh period in seconds (a reasonable
value is typically refresh metadata every hour).</p>
<p>An example metadata configuration could be:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span><span style="color:#000">IAM_SAML_IDP_METADATA</span><span style="color:#ce5c00;font-weight:bold">=</span>http://www.garr.it/idem-metadata/idem-metadata-sha256.xml
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_METADATA_REQUIRE_VALID_SIGNATURE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_METADATA_LOOKUP_SERVICE_REFRESH_PERIOD_SEC</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">3600</span>
</span></span></code></pre></div><h2 id="iam-saml-attribute-requirements">IAM SAML attribute requirements</h2>
<p>IAM requires that the IdP used for authentication releases a persistent
identifier attribute that can be used to link the external identity to local
IAM accounts. If the IdP does not release persistent identifier attributes, it
<strong>cannot</strong> be integrated with the IAM.</p>
<p>The attribute used to link the external SAML account is configurable. In the
default configuration, IAM uses the following attributes (in the given order):</p>
<ol>
<li><a href="http://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonUniqueId">EduPersonUniqueId</a></li>
<li><a href="http://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonTargetedID">EduPersonTargetedId</a></li>
<li><a href="http://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html#eduPersonPrincipalName">EduPersonPrincipalName</a></li>
</ol>
<p>The order of these can be changed with the <code>IAM_SAML_ID_RESOLVERS</code> environment variable,
which accepts a list of aliases for the attributes to be searched.</p>
<p>The following tables maps attribute names to the aliases currently supported:</p>
<table>
<thead>
<tr>
<th>SAML attribute</th>
<th>Alias</th>
</tr>
</thead>
<tbody>
<tr>
<td>EduPersonUniqueId</td>
<td>eduPersonUniqueId</td>
</tr>
<tr>
<td>EduPersonTargetedId</td>
<td>eduPersonTargetedId</td>
</tr>
<tr>
<td>EduPersonPrincipalName</td>
<td>eduPersonPrincipalName</td>
</tr>
<tr>
<td>EduPersonOrcid</td>
<td>eduPersonOrcid</td>
</tr>
<tr>
<td>spidCode</td>
<td>spidCode</td>
</tr>
</tbody>
</table>
<p>The default value for IAM_SAML_ID_RESOLVERS is:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span><span style="color:#000">IAM_SAML_ID_RESOLVERS</span><span style="color:#ce5c00;font-weight:bold">=</span>eduPersonUniqueId,eduPersonTargetedId,eduPersonPrincipalName
</span></span></code></pre></div><h2 id="checking-saml-assertion-and-authentication-freshness">Checking SAML assertion and authentication freshness</h2>
<p>IAM provides the ability to set a maximum age for SAML assertion and
authentication statements received from IdPs.</p>
<p>The <code>IAM_SAML_MAX_ASSERTION_TIME</code> allows to define an upper bound (in seconds)
on the SAML assertion lifetime, so that assertions that exceed such limit are
considered invalid.</p>
<p>The <code>IAM_SAML_MAX_AUTHENTICATION_AGE</code> allows to define an upper bound (in
seconds) on the authentication age linked to SAML authentication statements, so
that users are forced to reauthenticate when this limit is exceeded.</p>
<h2 id="limiting-authentication-only-to-selected-idps">Limiting authentication only to selected IdPs</h2>
<p>IAM provides the ability to define constraints on which IdPs will be allowed
for authentication. This is useful when you want to limit which IdPs in a large
federation (e.g., <a href="https://edugain.org/">EduGAIN</a>) will be trusted for authentication.</p>
<p>Currently three types of IdPs limiting are supported:</p>
<ul>
<li>entity id whitelist</li>
<li>SIRTFI compliance</li>
<li>Research and Scholarship compliance</li>
</ul>
<h3 id="limiting-by-entity-id">Limiting by entity id</h3>
<p>The <code>IAM_SAML_IDP_ENTITY_ID_WHITELIST</code> environment variable can be used to
define a comma-separated whitelist of IdPs entity IDs that will be trusted for
authentication.</p>
<p>The following example limits trusted IdPs to the INFN IdP:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span><span style="color:#000">IAM_SAML_IDP_ENTITY_ID_WHITELIST</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;https://idp.infn.it/saml2/idp/metadata.php&#34;</span>
</span></span></code></pre></div><h3 id="limiting-by-sirtfi-compliance">Limiting by SIRTFI compliance</h3>
<p>To limit authentication only to IdPs that are <a href="https://refeds.org/sirtfi">SIRFTI</a>-compliant, set
the the <code>IAM_SAML_METADATA_REQUIRE_SIRTFI</code> environment variable to true.</p>
<h2 id="joining-a-saml-federation">Joining a SAML federation</h2>
<p>An Indigo IAM instance can join a SAML federation as a service provider (SP).
To join a feaderation you need to follow the following steps:</p>
<ul>
<li>Configure the <code>saml</code> profile in IAM</li>
<li>Register the Indigo IAM instance into the federation, following the federation
instructions (generally involves connecting to a registration portal to
declare the SP)</li>
<li>Wait for the federation metadata to be updated at the federation IdPs. This
typically involves a 12h delay.</li>
<li>Check if login in IAM works successfully through the federation: note that it
will not work before the federation IdPs have updated their metadata. If the
error persists after the delay, contact your federation or IdP support.</li>
</ul>
<p>When registering the Indigo IAM SP, there are a few critical parameters to supply:</p>
<ul>
<li>Assertion Consumer Service (ACS), consisting of 3 parameters:
<ul>
<li>Binding: must be <code>HTTP Post</code></li>
<li>URL: it is the instance URL + <code>/saml/SSO</code>, e.g. <code>https://iam.example.com/saml/SSO</code></li>
<li>Index: should be set to 0</li>
</ul>
</li>
<li>X509 SAML certificate: the generated <code>self-signed</code> certificate</li>
</ul>
<p>Other, generally optional, parameters include the requested attribute. It is a good
practice to declare as mandatory one of the attribute listed in
<code>IAM_SAML_ID_RESOLVERS</code>.</p>
<h2 id="customizing-saml-login-button-text">Customizing SAML login button text</h2>
<p>You can customize the SAML login button text shown in the IAM login page with
the <code>IAM_SAML_LOGIN_BUTTON_TEXT</code> environment variable.</p>
<h2 id="minimal-saml-configuration-example">Minimal SAML configuration example</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-env" data-lang="env"><span style="display:flex;"><span><span style="color:#000">IAM_SAML_ENTITY_ID</span><span style="color:#ce5c00;font-weight:bold">=</span>urn:example:iam-saml-example
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_KEYSTORE</span><span style="color:#ce5c00;font-weight:bold">=</span>file:///self-signed.jks
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_KEYSTORE_PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span>xxxxxx
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_KEY_ID</span><span style="color:#ce5c00;font-weight:bold">=</span>self-signed
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_KEY_PASSWORD</span><span style="color:#ce5c00;font-weight:bold">=</span>xxxxxx
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_IDP_METADATA</span><span style="color:#ce5c00;font-weight:bold">=</span>http://www.garr.it/idem-metadata/idem-metadata-sha256.xml
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_METADATA_REQUIRE_VALID_SIGNATURE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_METADATA_LOOKUP_SERVICE_REFRESH_PERIOD_SEC</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">3600</span>
</span></span><span style="display:flex;"><span><span style="color:#000">IAM_SAML_LOGIN_BUTTON_TEXT</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Sign in with IDEM&#34;</span>
</span></span></code></pre></div><h2 id="custom-saml-configuration">Custom SAML configuration</h2>
<p>The configuration based on environment variables relies on a <a href="https://raw.githubusercontent.com/indigo-iam/iam/v1.12.0/iam-login-service/src/main/resources/application-saml.yml">configuration
template</a> that fits most use cases embedded in the IAM war
file.</p>
<p>To have full control on the SAML configuration, provide a custom
<code>application-saml.yml</code> file in the IAM configuration directory.</p>
<p>See the <a href="/v/v1.12.0/docs/reference/configuration/">configuration reference</a> for more SAML metadata options and
instructions on how to override the default IAM configuration.</p>
<h2 id="registration-form-filling-information-from-idp">Registration form: filling information from IdP</h2>
<p>See <a href="/v/v1.12.0/docs/reference/configuration/registration/#registration-with-external-idp">registration configuration</a>.</p>

  <div class="section-index">
    
    
    </div>
<div class="td-page-meta__lastmod">
  Last modified June 27, 2024: <a href="https://github.com/indigo-iam/iam-website/commit/7c246a245b599dc89f40639d320c5afa5afbf98c">Further fixes (7c246a2)</a>
</div>
</div>

          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/indigo-iam/iam" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="Slack" aria-label="Slack">
    <a target="_blank" rel="noopener" href="https://indigo-iam.slack.com" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2025
    <span class="td-footer__authors">INFN</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="/v/v1.12.0/js/main.min.dc2c0119076a0df855e55a8044ce0de74b7b9033c20e853e22d7ec7e9bdde965.js" integrity="sha256-3CwBGQdqDfhV5VqARM4N50t7kDPCDoU&#43;Itfsfpvd6WU=" crossorigin="anonymous"></script>
<script defer src="/v/v1.12.0/js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='/v/v1.12.0/js/tabpane-persist.js'></script>

  </body>
</html>